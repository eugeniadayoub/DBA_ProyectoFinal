services:
  # Servicio de MongoDB
  mongo-upme:
    image: mongo:latest
    container_name: mongo-proyecto-upme
    ports:
      - "27017:27017"
    volumes:
      - mongo-data:/data/db
    networks:
      - upme-net 

  etl-loader:
    build: ./data  # <- Le dice a Docker que busque un 'Dockerfile' en la carpeta 'data'
    container_name: etl-loader-script
    depends_on:
      - mongo-upme # Espera a que la BD estÃ© lista
    networks:
      - upme-net # <- Se conecta a la misma red que la BD
    restart: "no" # <- Se ejecuta una vez (el script) y no se reinicia

volumes:
  mongo-data:

# Definimos la red para que los contenedores se puedan comunicar
networks:
  upme-net:
    driver: bridge
